@mixin box-shadow($opacity)
  box-shadow: 0.4rem 0.4rem 0.6rem rgba($color-black, $opacity)

@mixin navigate-visible
  &.visible
    transition-duration: 0.1s
    transition-property: opacity
    opacity: 1
    pointer-events: auto

@mixin navigate-active
  &.active
    svg .cls-1
      fill: $color-blue-light

@mixin beeper($top, $right, $deg)
  &-beeper
    position: relative
    &_fill
      border-top: 0.1rem solid $color-grey
      border-left: 0.1rem solid $color-grey
      width: 1rem
      height: 1rem
      position: absolute
      display: block
      transform: rotate($deg)
      top: $top
      right: $right
      &:before
        display: block
        position: absolute
        content: ''
        width: 0
        height: 0
        border-style: solid
        border-width: 0.6rem
        border-color: $color-white transparent transparent $color-white

@mixin custom-scroll
  overflow: hidden
  overflow-y: scroll
  scrollbar-base-color: transparent
  &::-webkit-scrollbar
    // position: absolute
    width: 0.8rem
  &::-webkit-scrollbar-thumb
    border-radius: 0.4rem
    background-color: rgba($color-grey, 0.7)
  &::-webkit-scrollbar-track-piece 
    background: transparent

@mixin attention-icon($display, $top, $bottom, $left, $right)
  &.active
    display: block
    position: relative
    &:after
      position: absolute
      display: $display
      content: '!'
      z-index: 10
      +roboto-medium
      color: $color-white
      text-align: center
      font-size: 1.4rem
      padding: 0.1rem 0 0
      width: 1.6rem
      height: 1.5rem
      border-radius: 0.8rem
      background-color: red
      top: $top
      bottom: $bottom
      left: $left
      right: $right


.header
  background-color: $color-blue-dark
  height: 6rem
  color: $color-white
  padding-top: env(safe-area-inset-top)
  position: relative
  &:after
    position: absolute
    content: ''
    display: block
    left: 0
    bottom: 0
    width: 100%
    height: 0.1rem
    background-color: $color-blue-border
  &__loginPage
    width: 100%
    height: 100%
    display: flex
    justify-content: center
    align-items: center
  
  /* Account Page */
  &__account
    display: flex
    align-items: center
    padding: 0 0 0 2rem
    &-login
      width: 26rem
    &-navigate
      display: flex
      align-items: center
      justify-content: space-between
      flex-grow: 1
      padding: 0 5rem
      background-color: $color-white
      color: $color-blue-dark
      height: 100%
      &_burger
        display: block
        width: 3.5rem
        height: 2.4rem
        position: relative
        padding-right: 1.5rem
        margin-right: 3rem
        user-select: none
        &.mobile
          display: none
        &:before, &:after
          position: absolute
          content: ''
          top: 50%
          transform: translateY(-50%)
        &:after
          display: block
          border: 0.6rem solid transparent
          border-left: 0.8rem solid $color-blue-light
          right: -0.5rem
        &:before
          display: none
        &.active
          padding-right: 0
          padding-left: 1.5rem
          &:before
            display: block
            border: 0.6rem solid transparent
            border-right: 0.8rem solid $color-blue-light
            left: -0.5rem
          &:after
            display: none

      &_popup, &_popup-list
        background-color: $color-white
      &_popup
        position: absolute
        opacity: 0
        pointer-events: none
        bottom: -180%
        right: 4rem
        font-size: 1.6rem
        z-index: 10
        transition: 0.1s
        border: 0.1rem solid $color-grey
        box-sizing: border-box
        @include box-shadow(0.28)
        @include beeper(-0.7rem, 3.6rem, 45deg)
        &.visible
          transition: 0.1s
          opacity: 1
          pointer-events: auto
        &-item, &-subitem
          padding: 1rem 1.2rem
          display: flex
          align-items: center
          
          span
            -moz-user-select: none
            -khtml-user-select: none
            user-select: none
          &:hover
            cursor: pointer
            background-color: rgba($color-callList-bg, 0.2)

        &-list
          width: 0
          visibility: hidden
          position: absolute
          top: 0
          right: 101%
          @include box-shadow(0.14)
          pointer-events: none
          &.visible
            transition: 0.1s
            width: auto
            visibility: visible
            pointer-events: auto
        &-icon
          width: 3.2rem !important
          height: 3.2rem !important
          margin-right: 1.6rem
          img
            -moz-user-select: none
            -khtml-user-select: none
            user-select: none
        &-subitem
          span
            max-width: 16rem
            text-overflow: ellipsis
            overflow: hidden
            white-space: nowrap
          &.selected
            position: relative
            background-color: $color-callList-bg
            &:before
              position: absolute
              content: ''
              background-color: $color-blue-light
              height: 100%
              width: 0.5rem
              top: 0
              left: 0


      /* Notices */
      &_notices
        opacity: 0
        pointer-events: none
        position: absolute
        top: 6.1rem
        right: 11rem
        background-color: $color-white
        z-index: 6
        width: 26rem
        font-size: 1.2rem
        box-sizing: border-box
        border: 0.1rem solid $color-grey
        @include box-shadow(0.28)
        &.visible
          transition-duration: 0.1s
          transition-property: opacity
          opacity: 1
          pointer-events: auto
        @include beeper(-0.7rem, 2rem, 45deg)
        &-header
          padding: 1rem
          border-bottom: 0.1rem solid $color-grey
          display: flex
          align-items: center
          justify-content: space-between
          user-select: none
        &-title
          +roboto_medium
          font-size: 1.4rem
        &-readAll
          color: $color-blue-light
          &:hover
            cursor: pointer
            text-decoration: underline
        &-block
          max-height: 38rem
          @include custom-scroll

        &-item
          display: flex
          align-items: center
          padding: 1rem
          box-sizing: border-box
          &.selected
            background-color: $color-callList-bg
          &:not(:last-child)
            border-bottom: 0.1rem solid $color-grey
        &-img
          margin-right: 1rem
          width: 4rem
          user-select: none
          img
            width: 100%
        &-date
          display: flex
          align-items: center
        &-pretitle
          width: calc(100% - 70px)
        &-text
          margin-bottom: 0.7rem
          display: inline-block
          max-width: 100%
          white-space: nowrap
          overflow: hidden
          text-overflow: ellipsis
        &-type
          width: 1.3rem
          margin-right: 0.5rem
          user-select: none
          img
            width: 100%

      /* Support */
      &_support
        position: absolute
        opacity: 0
        pointer-events: none
        background-color: $color-white
        font-size: 1.4rem
        z-index: 6
        top: 6.1rem
        right: 15rem
        width: 22rem
        box-sizing: border-box
        border: 0.1rem solid $color-grey
        @include box-shadow(0.28)
        @include beeper(-0.7rem, 2.1rem, 45deg)
        &.visible
          opacity: 1
          transition: 0.1s
          pointer-events: auto
        &-item
          display: flex
          align-items: center
          padding: 1rem
          box-sizing: border-box
          &.selected
            background-color: $color-callList-bg
          &:not(:last-child)
            border-bottom: 0.1rem solid $color-grey
        &-header
          padding: 1rem
          border-bottom: 0.1rem solid $color-grey
          user-select: none
        &-title
          +roboto_medium
          font-size: 1.4rem
        &-text
          &:hover
            text-decoration: underline
            cursor: pointer

        /* Tickets support-item */
        &-tickets
          .attention-tickets
            display: none
            @include attention-icon(block, -0.8rem, auto, 8rem, auto)


      &_leftBlock, &_rightBlock
        display: flex
        height: 100%
        align-items: center
      &_leftBlock
        flex-grow: 1
      &_rightBlock
        position: relative
      &_search
        display: block
        width: 2.4rem
        &-form
          position: relative
        &-input
          display: inline-block
          width: 0
          visibility: hidden
          margin: 0 0.5rem 0 1rem
          padding: 0 4.8rem 0 1.2rem
          font-size: 1.8rem
          box-sizing: border-box
          height: 3rem
          border-radius: 1.5rem
          border: 0.1rem solid $color-black
          transition: 0.2s
          pointer-events: none
          &:focus
            outline: none
          &.active
            width: 29rem
            visibility: visible
            pointer-events: auto
        &-submit
          background-color: $color-blue-item
          color: $color-white
          border: none
          font-size: 1.4rem
          border-radius: 0.5rem
          width: 4rem
          height: 3rem
          border-top-right-radius: 1.5rem
          border-top-left-radius: 0
          border-bottom-right-radius: 1.5rem
          border-bottom-left-radius: 0
          transition: 0.1s
          opacity: 0
          pointer-events: none
          transition: 0.1s
          position: absolute
          left: 26rem
          background-image: url('../../assets/images/search-2_icon.svg')
          background-repeat: no-repeat
          background-size: 1.8rem
          background-position: center
          &::ms-clear
            display: block
          &:hover
            cursor: pointer
          &:active
            background-size: 1.9rem
          &:focus
            outline: none
          &.active
            transition: 0.1s
            opacity: 1
            pointer-events: auto
      &_indicator
        padding: 0 1.1rem
        &-mobile
          display: none
      &_marker
        height: 100%
        padding: 0 2rem
        border-right: 0.02rem solid rgba(0, 0, 0, 0.3)
        &:first-child
          border-left: 0.02rem solid rgba(0, 0, 0, 0.3)
        &:nth-child(3)
          margin-right: 1rem
        img
          margin-top: 1.6rem
        &.active
          background-color: rgba($color-grey, 0.15)
          position: relative
          &:after
            position: absolute
            content: ''
            display: block
            width: 100%
            height: 0.4rem
            background-color: $color-blue-dark
            bottom: 0
            left: 0
            z-index: 1
          &:hover
            img
              transform: scale(1)
      &_main
        width: 2.3rem
      &_messages
        width: 3.5rem
      &_settings
        width: 2.3rem
      &_question
        width: 1.8rem
        @include navigate-active
        // &.active
        //   svg .cls-1
        //     fill: $color-blue-light
        &-attention
          display: none
          @include attention-icon(block, -0.3rem, auto, auto, -0.9rem)
          &_mobile
            display: none
      &_bell
        width: 2.1rem
        @include navigate-active
        // &.active
        //   svg .cls-1
        //     fill: $color-blue-light
        &-attention
          display: none
          @include attention-icon(block, -0.3rem, auto, auto, -0.6rem)
          &_mobile
            display: none

      &_profile
        display: block
        padding: 0
        margin: 0 1rem
        width: 4.2rem
        height: 4.2rem
        border-radius: 2.1rem
        background-color: rgba($color-grey, 0.3)
        background-image: url('../../assets/images/profile_icon.svg')
        background-repeat: no-repeat
        background-size: cover
      &_phonecall
        width: 3rem
        margin-bottom: 0.5rem
        svg .cls-2
          fill: none
          stroke: red
          stroke-linecap: round
          stroke-linejoin: round
          stroke-width: 2px
        @include navigate-active
        // &.active
        //   svg .cls-1
        //     fill: $color-blue-light


@media (max-width: 1420px)
  .header
    &__account
      &-login
        width: 20rem
      &-navigate
        padding: 0 2.2rem

@media (max-width: 1120px)
  .header
    &__account
      height: auto
      width: 100%
      flex-direction: column
      padding: 0
      &-login
        width: fit-content
        margin: 1.1rem 0
      &-navigate
        padding: 0
        height: 6rem
        width: 100%
        &_leftBlock
          flex-grow: 0
          margin-left: 1rem
        &_question, &_bell, &_phonecall
          display: none
        &_profile
          &-attention
            @include attention-icon(block, -0.5rem, auto, 2.6rem, auto)
        &_bell
          &-attention
            @include attention-icon(none, -0.3rem, auto, auto, -0.6rem)
            &_mobile
              @include attention-icon(block, auto, 0.2rem, 2rem, right)
          &_mobile
            display: none
        &_question
          &-attention
            @include attention-icon(none, -0.3rem, auto, auto, -0.9rem)
            &_mobile
              @include attention-icon(block, auto, 0.2rem, 2rem, auto)

        &_popup
          bottom: -440%
          right: 0.5rem
          &-item, &-subitem
            &:hover
              background-color: none
          &-beeper
            &_fill
              right: 1.8rem
          &.visible
            transition: 0
        &_notices
          z-index: 11
          right: 17rem
          &-beeper 
            &_fill
              top: 17.8rem
              right: -0.7rem
              transform: rotate(135deg)
        &_support
          width: 20rem
          z-index: 11
          top: 8rem
          right: 17rem
          &-beeper 
            &_fill
              top: 10.5rem
              right: -0.7rem
              transform: rotate(135deg)
        &_indicator            
          &-mobile
            display: flex
            &.selected
              background-color: $color-callList-bg
            div img
              height: 100%
              padding: 0

@media (max-width: 720px)
  .header
    // align-items: flex-start
    &.height
      height: 100% !important
    &__account
      height: 6rem
      &-login
        margin: 0
        position: absolute
        // border: 0.1rem solid $color-white
        height: 6rem
        // position: absolute
        // transform: translateY(2rem)
      &.mobile-visible
        transition: 0.1s
        height: 11rem
        .header__account-login
          transition: 0
          position: static
      &-navigate
        background: none
        &.mobile-visible
          background: $color-white
          height: 4rem
        &_burger
          display: none
          &.mobile
            display: block
            top: 1.6rem
            position: absolute
            margin-right: 0
            &.active
              margin-right: 1.5rem
              margin-left: 0
              padding-left: 0
            &:before, &:after
              display: none
        &_marker
          &.mobile-visible
            padding: 0 1.7rem
            img
              height: 56%
              width: 100%
              margin-top: 1rem
          &.active
            &:after
              background-color: $color-blue-light
        &_popup
          top: 6.2rem
          bottom: auto
          &-beeper
            &_fill
              right: 1.6rem
          &.mobile-mini
            display: none
        &_leftBlock, &_rightBlock
          position: static
        &_profile
          position: absolute
          top: 1.1rem
          right: 0
          width: 3.2rem
          height: 3.2rem
          border-radius: 1.6rem
          background-color: $color-grey
          border: 0.1rem solid $color-grey
          &-attention
            @include attention-icon(block, -0.5rem, auto, 2.2rem, auto)
        &_marker:nth-child(3)
          margin-right: 0
        &_search, &_search-form, &_marker
          display: none
        &_search.mobile-visible, &_search-form.mobile-visible, &_marker.mobile-visible
          display: block

        &_notices
          right: 0
          width: 100%
          top: 6rem
          height: calc(100% - 61px)
          &-beeper
            display: none
          &-block
            max-height: 85%

        &_support
          top: 6rem
          right: 0
          width: 100%
          height: calc(100% - 61px)
          &-beeper
            display: none

@media (max-width: 560px)
  .header
    &__account
      &-navigate
        &_popup
          &-subitem span
            max-width: 11rem
        &_search
          &-form
            &.mobile-mini
              position: absolute
              z-index: 2
              padding: 1.1rem 0 0.9rem
              top: 11rem
              width: 100%
              left: 0
              background: $color-white
              input:first-child
                width: 94%
              input:last-child
                left: auto
                right: 0.8rem

@media (max-width: 365px)
  .header
    &__account
      &-navigate
        &_popup
          &-subitem
            span
              max-width: 7.5rem



